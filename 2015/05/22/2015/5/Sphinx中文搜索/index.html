<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Sphinx文档中文搜索支持 · Hexo</title><meta name="description" content="Sphinx文档中文搜索支持 - solos"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Sphinx文档中文搜索支持</h1><div class="post-info">May 22, 2015</div><div class="post-content"><p>#安装结巴中文分词 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install jieba</div></pre></td></tr></table></figure>
<p>#复制spinx中文搜索插件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> https://github.com/bosbyj/sphinx.search.zh_CN</div><div class="line"></div><div class="line">cp sphinx.search.zh_CN.py /Library/Python/2.7/site-packages/sphinx/search/zh_CN.py <span class="comment"># 注意一下sphinx安装路径</span></div></pre></td></tr></table></figure>
<p>#修改Sphinx代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /Library/Python/2.7/site-packages/sphinx/search/__init__.py  <span class="comment"># 注意一下sphinx安装路径</span></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">from</span> sphinx.search <span class="keyword">import</span> en, ja</div><div class="line"></div><div class="line">languages = &#123;</div><div class="line">    <span class="string">'en'</span>: en.SearchEnglish,</div><div class="line">    <span class="string">'ja'</span>: ja.SearchJapanese,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>改为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">from</span> sphinx.search <span class="keyword">import</span> en, ja, zh_CN</div><div class="line"></div><div class="line">languages = &#123;</div><div class="line">    <span class="string">'en'</span>: en.SearchEnglish,</div><div class="line">    <span class="string">'ja'</span>: ja.SearchJapanese,</div><div class="line">    <span class="string">'zh_CN'</span>: zh_CN.SearchChinese</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">languages = &#123;</div><div class="line">    <span class="string">'da'</span>: <span class="string">'sphinx.search.da.SearchDanish'</span>,</div><div class="line">    <span class="string">'de'</span>: <span class="string">'sphinx.search.de.SearchGerman'</span>,</div><div class="line">    <span class="string">'en'</span>: SearchEnglish,</div><div class="line">    <span class="string">'es'</span>: <span class="string">'sphinx.search.es.SearchSpanish'</span>,</div><div class="line">    <span class="string">'fi'</span>: <span class="string">'sphinx.search.fi.SearchFinnish'</span>,</div><div class="line">    <span class="string">'fr'</span>: <span class="string">'sphinx.search.fr.SearchFrench'</span>,</div><div class="line">    <span class="string">'hu'</span>: <span class="string">'sphinx.search.hu.SearchHungarian'</span>,</div><div class="line">    <span class="string">'it'</span>: <span class="string">'sphinx.search.it.SearchItalian'</span>,</div><div class="line">    <span class="string">'ja'</span>: <span class="string">'sphinx.search.ja.SearchJapanese'</span>,</div><div class="line">    <span class="string">'nl'</span>: <span class="string">'sphinx.search.nl.SearchDutch'</span>,</div><div class="line">    <span class="string">'no'</span>: <span class="string">'sphinx.search.no.SearchNorwegian'</span>,</div><div class="line">    <span class="string">'pt'</span>: <span class="string">'sphinx.search.pt.SearchPortuguese'</span>,</div><div class="line">    <span class="string">'ro'</span>: <span class="string">'sphinx.search.ro.SearchRomanian'</span>,</div><div class="line">    <span class="string">'ru'</span>: <span class="string">'sphinx.search.ru.SearchRussian'</span>,</div><div class="line">    <span class="string">'sv'</span>: <span class="string">'sphinx.search.sv.SearchSwedish'</span>,</div><div class="line">    <span class="string">'tr'</span>: <span class="string">'sphinx.search.tr.SearchTurkish'</span>,</div><div class="line">    <span class="string">'zh_CN'</span>: <span class="string">'sphinx.search.zh_CN.SearchChinese'</span>,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>#修改sphinx配置文件</p>
<pre><code>在sphinx工程的conf.py中添加language = &apos;zh_CN&apos;
</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make html</div></pre></td></tr></table></figure>
</div></article></div></section><footer><div class="paginator"><a href="/2015/09/28/2012/7/Javascript datetime函数/" class="prev">上一篇</a><a href="/2015/05/20/2015/5/xml转json/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://solos.so">solos</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>